name: Check PR details

on:
  pull_request:
    branches:
      - main
    types:
      - opened
      - synchronize
      - reopened

jobs:
  check_the_PR_details:
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      - name: Checkout iTwin/studio repository
        uses: actions/checkout@v4
        
      - name: Set and Retrieve Github ENV variables
        shell: bash
        run: echo "PR_NUMBER=$(echo ${GITHUB_REF} | sed 's/refs\/pull\/\([0-9]*\)\/merge/\1/')" >> $GITHUB_ENV

      - name: Print PR Number
        run: echo "The PR number is ${{ env.PR_NUMBER }}"  
        
      - name: Get PR label
        id: get_pr_label
        uses: joerick/pr-labels-action@v1.0.8

      - name: Print PR label
        uses: snnaplab/get-labels-action@v1

      - name: Print PR title
        if: contains(fromJson(${{env.LABELS}},"automated pr"))
        run: echo "Contains"
        